<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TypeScript HTML App</title>
  <style>
    html, body {
        margin: 0;
        overflow: hidden;
    }

    body {
      background: antiquewhite;
    }
    canvas {
        width: 300px;
        height: 300px;
        display: block;
    }
  </style>
  <!-- Live2DCubismCore script -->
  <script src = "./Core/live2dcubismcore.js"></script>
  <!-- Build script -->
  <script src = "src/sdk-v5/main.ts" type="module"></script>
  <script src="src/waifu-tips/index.js" type="module"></script>
</head>
<body>
  <button id="myButton">这是按钮啊</button>
<!--  <canvas id="live2d"></canvas>-->
<script>
  // live2d_path 参数建议使用绝对路径
  const live2d_path = "https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/";
  //const live2d_path = "/live2d-widget/";

  // 封装异步加载资源的方法
  function loadExternalResource(url, type) {
    return new Promise((resolve, reject) => {
      let tag;

      if (type === "css") {
        tag = document.createElement("link");
        tag.rel = "stylesheet";
        tag.href = url;
      }
      else if (type === "js") {
        tag = document.createElement("script");
        tag.src = url;
      }
      if (tag) {
        tag.onload = () => resolve(url);
        tag.onerror = () => reject(url);
        document.head.appendChild(tag);
      }
    });
  }

  // 加载 waifu.css live2d.min.js waifu-tips.js
  if (screen.width >= 768) {
    Promise.all([
      loadExternalResource("https://letere-gzj.github.io/hugo-stack/live2d/waifu.css", "css"),
      // loadExternalResource(live2d_path + "live2d.min.js", "js"),
      loadExternalResource("/assets/waifu-tips.js", "js")
    ]).then(() => {
      // 配置选项的具体用法见 README.md
      initWidget({
        waifuPath: live2d_path + "waifu-tips.json",
        //apiPath: "https://live2d.fghrsh.net/api/",
        // cdnPath: "https://fastly.jsdelivr.net/gh/fghrsh/live2d_api/",
        cdnPath: "http://localhost:5000/Resources/",
        tools: ["hitokoto", "asteroids", "switch-model", "switch-texture", "express", "info", "quit"],
        dragEnable: true,
        dragDirection: ["x", "y"],
        switchType: "order"
      });
    });
  }
</script>
</body>
</html>
